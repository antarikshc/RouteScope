/* ── Variables ────────────────────────────────────────────────────────────── */
:root {
  --bg:        #0d0f18;
  --surface:   #141720;
  --surface-2: #1c2030;
  --border:    #242838;
  --border-2:  #2e3248;
  --text:      #dde2f0;
  --text-sub:  #6470a0;
  --google:    #4285F4;
  --tomtom:    #FF4757;
  --ola:       #2ed573;
  --warn:      #ffa502;
  --radius:    10px;
}

/* ── Reset ───────────────────────────────────────────────────────────────── */
*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
body {
  background: var(--bg);
  color: var(--text);
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui, sans-serif;
  font-size: 13px;
  line-height: 1.5;
  min-height: 100vh;
}

/* ── Header ──────────────────────────────────────────────────────────────── */
header {
  position: sticky;
  top: 0;
  z-index: 200;
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 0 20px;
  height: 52px;
  background: rgba(14,16,26,0.92);
  backdrop-filter: blur(12px);
  border-bottom: 1px solid var(--border);
}

.header-left { display: flex; align-items: center; gap: 24px; }
.header-right { display: flex; align-items: center; gap: 16px; }

.logo {
  display: flex;
  align-items: center;
  gap: 8px;
  font-weight: 700;
  font-size: 0.95rem;
  letter-spacing: -0.02em;
  color: var(--text);
  white-space: nowrap;
}

/* Tabs */
.route-tabs { display: flex; gap: 2px; }

.tab-btn {
  background: none;
  border: 1px solid transparent;
  color: var(--text-sub);
  padding: 5px 13px;
  border-radius: 6px;
  cursor: pointer;
  font-size: 0.82rem;
  font-weight: 500;
  transition: color 0.15s, background 0.15s, border-color 0.15s;
  white-space: nowrap;
}
.tab-btn:hover { color: var(--text); background: var(--surface-2); }
.tab-btn.active {
  color: var(--text);
  background: var(--surface-2);
  border-color: var(--border-2);
}

/* Live badge */
.live-badge {
  display: flex;
  align-items: center;
  gap: 6px;
  font-size: 0.7rem;
  font-weight: 700;
  letter-spacing: 0.08em;
  color: var(--ola);
}
.live-dot {
  width: 6px; height: 6px;
  border-radius: 50%;
  background: var(--ola);
  animation: blink 2s ease-in-out infinite;
}
@keyframes blink { 0%,100%{opacity:1} 50%{opacity:0.25} }

.last-updated { font-size: 0.75rem; color: var(--text-sub); }

/* ── Stats bar ───────────────────────────────────────────────────────────── */
.stats-bar {
  display: flex;
  align-items: stretch;
  background: var(--surface);
  border-bottom: 1px solid var(--border);
  padding: 0 20px;
  gap: 0;
  overflow-x: auto;
}

.stat-item {
  padding: 14px 24px;
  flex-shrink: 0;
}
.stat-sep {
  width: 1px;
  background: var(--border);
  margin: 10px 0;
  flex-shrink: 0;
}

.stat-header {
  display: flex;
  align-items: center;
  gap: 6px;
  margin-bottom: 4px;
}
.stat-dot { width: 7px; height: 7px; border-radius: 50%; flex-shrink: 0; }
.stat-label { font-size: 0.72rem; text-transform: uppercase; letter-spacing: 0.06em; color: var(--text-sub); }
.stat-badge {
  font-size: 0.62rem;
  padding: 1px 6px;
  border-radius: 4px;
  font-weight: 600;
  letter-spacing: 0.04em;
}
.stat-badge.baseline { background: rgba(66,133,244,0.15); color: var(--google); }

.stat-value {
  font-size: 1.6rem;
  font-weight: 700;
  letter-spacing: -0.04em;
  line-height: 1.1;
}
.stat-sub {
  font-size: 0.75rem;
  color: var(--text-sub);
  margin-top: 3px;
  display: flex;
  align-items: center;
  gap: 6px;
}
.stat-delta {
  font-size: 0.75rem;
  font-weight: 600;
  padding: 1px 5px;
  border-radius: 4px;
}
.stat-delta.pos { color: var(--tomtom); background: rgba(255,71,87,0.12); }
.stat-delta.neg { color: var(--ola);    background: rgba(46,213,115,0.12); }
.stat-delta.neu { color: var(--text-sub); }

/* ── Main layout ─────────────────────────────────────────────────────────── */
.main {
  padding: 16px 20px 24px;
  display: flex;
  flex-direction: column;
  gap: 16px;
}

/* ── Panels ──────────────────────────────────────────────────────────────── */
.panel {
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  overflow: hidden;
}

.panel-header {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 12px 16px;
  border-bottom: 1px solid var(--border);
}
.panel-title { font-weight: 600; font-size: 0.85rem; }
.panel-sub   { font-size: 0.75rem; color: var(--text-sub); margin-left: auto; }

/* ── Content grid ────────────────────────────────────────────────────────── */
.content-grid {
  display: grid;
  grid-template-columns: 1fr 380px;
  gap: 16px;
  min-height: 500px;
}
@media (max-width: 1080px) {
  .content-grid { grid-template-columns: 1fr; }
}

/* Map */
.map-panel { display: flex; flex-direction: column; }

.map-legend {
  display: flex;
  gap: 14px;
  margin-left: 8px;
}
.leg {
  display: flex;
  align-items: center;
  gap: 6px;
  font-size: 0.75rem;
  color: var(--text-sub);
}
.leg-line { width: 20px; height: 3px; border-radius: 2px; }
.leg.google .leg-line { background: var(--google); }
.leg.tomtom .leg-line { background: var(--tomtom); }
.leg.ola    .leg-line { background: var(--ola); }

#map {
  flex: 1;
  min-height: 420px;
  position: relative;
}
.map-empty {
  position: absolute;
  inset: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  color: var(--text-sub);
  font-size: 0.82rem;
  background: var(--surface-2);
}

/* Charts column */
.charts-col {
  display: flex;
  flex-direction: column;
  gap: 16px;
}
.chart-panel { display: flex; flex-direction: column; flex: 1; }
.chart-wrap {
  padding: 10px 14px 14px;
  flex: 1;
}
.chart-wrap canvas { max-height: 185px; }

/* ── Bottom grid ─────────────────────────────────────────────────────────── */
.bottom-grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 16px;
}
@media (max-width: 800px) {
  .bottom-grid { grid-template-columns: 1fr; }
}

/* Alerts */
.alerts-panel .panel-header { border-bottom: 1px solid var(--border); }

.alert-pill {
  margin-left: auto;
  font-size: 0.7rem;
  font-weight: 700;
  padding: 2px 8px;
  border-radius: 20px;
  background: var(--warn);
  color: #000;
  min-width: 22px;
  text-align: center;
}
.alert-pill.zero { background: var(--border-2); color: var(--text-sub); }

#alerts-list {
  display: flex;
  flex-direction: column;
  gap: 6px;
  padding: 10px 12px;
  max-height: 220px;
  overflow-y: auto;
}

.alert-row {
  display: flex;
  flex-direction: column;
  gap: 2px;
  padding: 10px 12px;
  border-radius: 7px;
  background: rgba(255,165,2,0.06);
  border: 1px solid rgba(255,165,2,0.18);
}
.alert-api  { font-weight: 700; font-size: 0.82rem; color: var(--warn); }
.alert-meta { font-size: 0.75rem; color: var(--text-sub); }

.empty-msg { font-size: 0.8rem; color: var(--text-sub); font-style: italic; padding: 4px 2px; }

/* Table */
.table-wrap { overflow-x: auto; }
table { width: 100%; border-collapse: collapse; font-size: 0.78rem; }
th {
  padding: 8px 12px;
  text-align: left;
  color: var(--text-sub);
  font-weight: 500;
  font-size: 0.7rem;
  text-transform: uppercase;
  letter-spacing: 0.05em;
  border-bottom: 1px solid var(--border);
  white-space: nowrap;
}
td {
  padding: 7px 12px;
  border-bottom: 1px solid rgba(255,255,255,0.04);
  color: var(--text);
  white-space: nowrap;
}
tr:last-child td { border-bottom: none; }
.dp { color: var(--tomtom); font-weight: 600; }
.dn { color: var(--ola);    font-weight: 600; }

/* Scrollbar styling */
::-webkit-scrollbar { width: 4px; height: 4px; }
::-webkit-scrollbar-track { background: transparent; }
::-webkit-scrollbar-thumb { background: var(--border-2); border-radius: 4px; }
